!function(a,b,c,d){a.fn.popup=function(e){var f,g=a(this),h=a(c),i=g.selector||"",j=(new Date).getTime(),k=[],l=arguments[0],m="string"==typeof l,n=[].slice.call(arguments,1);return g.each(function(){var g,o=a.isPlainObject(e)?a.extend(!0,{},a.fn.popup.settings,e):a.extend({},a.fn.popup.settings),p=o.selector,q=o.className,r=o.error,s=o.metadata,t=o.namespace,u="."+o.namespace,v="module-"+t,w=a(this),x=a(o.context),y=o.target?a(o.target):w,z=a(b),A=o.inline?y.offsetParent():z,B=o.inline?y.next(o.selector.popup):z.children(o.selector.popup).last(),C=0,D=this,E=w.data(v);g={initialize:function(){g.debug("Initializing module",w),"click"==o.on?w.on("click",g.toggle):w.on(g.get.startEvent()+u,g.event.start).on(g.get.endEvent()+u,g.event.end),o.target&&g.debug("Target set to element",y),z.on("resize"+u,g.event.resize),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),E=g,w.data(v,E)},refresh:function(){o.inline?(B=y.next(p.popup),A=y.offsetParent()):B=z.children(p.popup).last()},destroy:function(){g.debug("Destroying previous module"),z.off(u),B.remove(),w.off(u).removeData(v)},event:{start:function(){g.timer=setTimeout(function(){g.is.hidden()&&g.show()},o.delay)},end:function(){clearTimeout(g.timer),g.is.visible()&&g.hide()},resize:function(){g.is.visible()&&g.set.position()}},create:function(){g.debug("Creating pop-up html");var b=w.data(s.html)||o.html,c=w.data(s.variation)||o.variation,d=w.data(s.title)||o.title,e=w.data(s.content)||w.attr("title")||o.content;b||e||d?(b||(b=o.template({title:d,content:e})),B=a("<div/>").addClass(q.popup).addClass(c).html(b),o.inline?(g.verbose("Inserting popup element inline",B),B.insertAfter(w)):(g.verbose("Appending popup element to body",B),B.appendTo(x)),a.proxy(o.onCreate,B)()):g.error(r.content)},toggle:function(){g.debug("Toggling pop-up"),g.is.hidden()?(g.debug("Popup is hidden, showing pop-up"),g.unbind.close(),g.hideAll(),g.show()):(g.debug("Popup is visible, hiding pop-up"),g.hide())},show:function(a){a=a||function(){},g.debug("Showing pop-up",o.transition),o.preserve||g.refresh(),g.exists()||g.create(),g.save.conditions(),g.set.position(),g.animate.show(a)},hide:function(a){a=a||function(){},w.removeClass(q.visible),g.restore.conditions(),g.unbind.close(),g.is.visible()&&g.animate.hide(a)},hideAll:function(){a(p.popup).filter(":visible").popup("hide")},hideGracefully:function(b){b&&0===a(b.target).closest(p.popup).size()?(g.debug("Click occurred outside popup hiding popup"),g.hide()):g.debug("Click was inside popup, keeping popup open")},exists:function(){return o.inline?0!==B.size():B.parent(x).size()},remove:function(){g.debug("Removing popup"),B.remove()},save:{conditions:function(){g.cache={title:w.attr("title")},g.cache.title&&w.removeAttr("title"),g.verbose("Saving original attributes",g.cache.title)}},restore:{conditions:function(){return g.cache&&g.cache.title&&w.attr("title",g.cache.title),g.verbose("Restoring original attributes",g.cache.title),!0}},animate:{show:function(b){b=b||function(){},w.addClass(q.visible),o.transition&&a.fn.transition!==d&&w.transition("is supported")?B.transition(o.transition+" in",o.duration,function(){g.bind.close(),a.proxy(b,D)()}):B.stop().fadeIn(o.duration,o.easing,function(){g.bind.close(),a.proxy(b,D)()}),a.proxy(o.onShow,D)()},hide:function(b){b=b||function(){},g.debug("Hiding pop-up"),o.transition&&a.fn.transition!==d&&w.transition("is supported")?B.transition(o.transition+" out",o.duration,function(){g.reset(),b()}):B.stop().fadeOut(o.duration,o.easing,function(){g.reset(),b()}),a.proxy(o.onHide,D)()}},get:{startEvent:function(){return"hover"==o.on?"mouseenter":"focus"==o.on?"focus":void 0},endEvent:function(){return"hover"==o.on?"mouseleave":"focus"==o.on?"blur":void 0},offstagePosition:function(){var c={top:a(b).scrollTop(),bottom:a(b).scrollTop()+a(b).height(),left:0,right:a(b).width()},d={width:B.width(),height:B.outerHeight(),position:B.offset()},e={},f=[];return d.position&&(e={top:d.position.top<c.top,bottom:d.position.top+d.height>c.bottom,right:d.position.left+d.width>c.right,left:d.position.left<c.left}),g.verbose("Checking if outside viewable area",d.position),a.each(e,function(a,b){b&&f.push(a)}),f.length>0?f.join(" "):!1},nextPosition:function(a){switch(a){case"top left":a="bottom left";break;case"bottom left":a="top right";break;case"top right":a="bottom right";break;case"bottom right":a="top center";break;case"top center":a="bottom center";break;case"bottom center":a="right center";break;case"right center":a="left center";break;case"left center":a="top center"}return a}},set:{position:function(c,d){var e,f,h=(a(b).width(),a(b).height(),y.outerWidth()),i=y.outerHeight(),j=B.outerWidth(),k=B.outerHeight(),l=A.outerWidth(),m=A.outerHeight(),n=o.distanceAway,p=o.inline?y.position():y.offset();if(c=c||w.data(s.position)||o.position,d=d||w.data(s.offset)||o.offset,o.inline){var t=g.is.rtl()?"margin-right":"margin-left";"left center"==c||"right center"==c?(d+=parseInt(b.getComputedStyle(D).getPropertyValue("margin-top"),10),n+=-parseInt(b.getComputedStyle(D).getPropertyValue(t),10)):(d+=parseInt(b.getComputedStyle(D).getPropertyValue(t),10),n+=parseInt(b.getComputedStyle(D).getPropertyValue("margin-top"),10))}g.debug("Calculating offset for position",c);var u=c;switch(g.is.rtl()&&(u=u.indexOf("left")>-1?u.replace("left","right"):u.replace("right","left")),u){case"top left":e={bottom:m-p.top+n,right:l-p.left-d,top:"auto",left:"auto"};break;case"top center":e={bottom:m-p.top+n,left:p.left+h/2-j/2+d,top:"auto",right:"auto"};break;case"top right":e={top:"auto",bottom:m-p.top+n,left:p.left+h+d,right:"auto"};break;case"left center":e={top:p.top+i/2-k/2+d,right:l-p.left+n,left:"auto",bottom:"auto"};break;case"right center":e={top:p.top+i/2-k/2+d,left:p.left+h+n,bottom:"auto",right:"auto"};break;case"bottom left":e={top:p.top+i+n,right:l-p.left-d,left:"auto",bottom:"auto"};break;case"bottom center":e={top:p.top+i+n,left:p.left+h/2-j/2+d,bottom:"auto",right:"auto"};break;case"bottom right":e={top:p.top+i+n,left:p.left+h+d,bottom:"auto",right:"auto"}}return B.css(e).removeClass(q.position).addClass(c).addClass(q.loading),f=g.get.offstagePosition(),f?(g.debug("Element is outside boundaries",f),C<o.maxSearchDepth?(c=g.get.nextPosition(c),C++,g.debug("Trying new position",c),g.set.position(c)):(g.error(r.recursion),C=0,g.reset(),B.removeClass(q.loading),!1)):(g.debug("Position is on stage",c),C=0,B.removeClass(q.loading),!0)}},bind:{close:function(){"click"==o.on&&o.closable&&(g.verbose("Binding popup close event to document"),h.on("click"+u,function(b){g.verbose("Pop-up clickaway intent detected"),a.proxy(g.hideGracefully,this)(b)}))}},unbind:{close:function(){"click"==o.on&&o.closable&&(g.verbose("Removing close event from document"),h.off("click"+u))}},is:{animating:function(){return B.is(":animated")||B.hasClass(q.animating)},visible:function(){return B.is(":visible")},hidden:function(){return!g.is.visible()},rtl:function(){return"rtl"==a(c.body).css("direction")||w.hasClass("rtl")}},reset:function(){B.attr("style","").removeAttr("style"),o.preserve||g.remove()},setting:function(b,c){if(a.isPlainObject(b))a.extend(!0,o,b);else{if(c===d)return o[b];o[b]=c}},internal:function(b,c){if(a.isPlainObject(b))a.extend(!0,g,b);else{if(c===d)return g[b];g[b]=c}},debug:function(){o.debug&&(o.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,o.name+":"),g.debug.apply(console,arguments)))},verbose:function(){o.verbose&&o.debug&&(o.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,o.name+":"),g.error.apply(console,arguments)},performance:{log:function(a){var b,c,d;o.performance&&(b=(new Date).getTime(),d=j||b,c=b-d,j=b,k.push({Element:D,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var b=o.name+":",c=0;j=!1,clearTimeout(g.performance.timer),a.each(k,function(a,b){c+=b["Execution Time"]}),b+=" "+c+"ms",i&&(b+=" '"+i+"'"),(console.group!==d||console.table!==d)&&k.length>0&&(console.groupCollapsed(b),console.table?console.table(k):a.each(k,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(b,c,e){var g,h,i,j=E;return c=c||n,e=D||e,"string"==typeof b&&j!==d&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(c,e){var f=c!=g?e+b[c+1].charAt(0).toUpperCase()+b[c+1].slice(1):b;if(a.isPlainObject(j[f])&&c!=g)j=j[f];else{if(j[f]!==d)return h=j[f],!1;if(!a.isPlainObject(j[e])||c==g)return j[e]!==d?(h=j[e],!1):!1;j=j[e]}})),a.isFunction(h)?i=h.apply(e,c):h!==d&&(i=h),a.isArray(f)?f.push(i):f!==d?f=[f,i]:i!==d&&(f=i),h}},m?(E===d&&g.initialize(),g.invoke(l)):(E!==d&&g.destroy(),g.initialize())}),f!==d?f:this},a.fn.popup.settings={name:"Popup",debug:!0,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",target:!1,closable:!0,context:"body",position:"top center",delay:150,inline:!1,preserve:!1,duration:250,easing:"easeOutQuint",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{animating:"animating",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(a){var b="";return typeof a!==d&&(typeof a.title!==d&&a.title&&(b+='<div class="header">'+a.title+'</div class="header">'),typeof a.content!==d&&a.content&&(b+='<div class="content">'+a.content+"</div>")),b}}}(jQuery,window,document);